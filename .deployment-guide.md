# Free Deployment Guide for KHQR POS System

## Option 1: Railway.app (Recommended)

### Steps:
1. Create account at https://railway.app
2. Click "New Project" â†’ "Deploy from GitHub repo"
3. Connect your GitHub account and select this repository
4. Add MySQL database:
   - Click "New" â†’ "Database" â†’ "Add MySQL"
5. Set environment variables in Railway dashboard:
   ```
   APP_ENV=production
   APP_DEBUG=false
   APP_KEY=base64:T9kkVNXNFa+mIS46SsczmW5Ltizpu+bH0Zy5k+kKmVw=
   
   DB_CONNECTION=mysql
   DB_HOST=${{MYSQL.MYSQL_HOST}}
   DB_PORT=${{MYSQL.MYSQL_PORT}}
   DB_DATABASE=${{MYSQL.MYSQL_DATABASE}}
   DB_USERNAME=${{MYSQL.MYSQL_USER}}
   DB_PASSWORD=${{MYSQL.MYSQL_PASSWORD}}
   
   BAKONG_API_URL=https://api-bakong.nbc.gov.kh
   BAKONG_TOKEN=your_token_here
   
   TELEGRAM_BOT_TOKEN=your_bot_token
   TELEGRAM_CHAT_ID=your_chat_id
   
   MERCHANT_BAKONG_ID=deth_peak3@aclb
   MERCHANT_NAME="PuDeth Smart-PAY"
   MERCHANT_CITY="PHNOM PENH"
   ```
6. Deploy automatically!

### Cost: FREE ($5 credit/month)

---

## Option 2: Render.com

### Steps:
1. Create account at https://render.com
2. Click "New +" â†’ "Web Service"
3. Connect GitHub repository
4. Configure:
   - Build Command: `composer install --no-dev && php artisan migrate --force`
   - Start Command: `php artisan serve --host=0.0.0.0 --port=$PORT`
5. Add PostgreSQL database (free tier)
6. Set environment variables (same as above, but use PostgreSQL)

### Cost: FREE

---

## Option 3: InfinityFree (Traditional Hosting)

### Steps:
1. Sign up at https://infinityfree.net
2. Create new account
3. Upload files via FTP or File Manager
4. Create MySQL database in control panel
5. Update `.env` with database credentials
6. Run migrations via SSH or web terminal

### Limitations:
- No background workers (scheduler won't work)
- Limited resources
- Ads on free tier

### Cost: 100% FREE

---

## Option 4: Fly.io

### Steps:
1. Install flyctl: https://fly.io/docs/hands-on/install-flyctl/
2. Run in terminal:
   ```bash
   fly auth signup
   fly launch
   fly secrets set APP_KEY=base64:T9kkVNXNFa+mIS46SsczmW5Ltizpu+bH0Zy5k+kKmVw=
   fly secrets set BAKONG_TOKEN=your_token
   fly secrets set TELEGRAM_BOT_TOKEN=your_token
   fly deploy
   ```

### Cost: FREE (3 VMs included)

---

## Important Notes:

### Before Deployment:
1. **Update APP_URL** in production environment
2. **Generate new APP_KEY**: `php artisan key:generate`
3. **Update Google OAuth redirect URI** to production URL
4. **Secure sensitive data** - don't commit `.env` to Git
5. **Run migrations** on production database

### Security Checklist:
- [ ] Set `APP_DEBUG=false` in production
- [ ] Set `APP_ENV=production`
- [ ] Use strong database passwords
- [ ] Enable HTTPS (most platforms do this automatically)
- [ ] Update CORS settings if needed

### Database Migration:
After deployment, run:
```bash
php artisan migrate --force
php artisan db:seed --class=BilingualProductSeeder
```

---

## Recommended: Railway.app

Railway is the best option because:
- âœ… Easy setup (5 minutes)
- âœ… MySQL support (your project uses MySQL)
- âœ… Background workers (for payment checking)
- âœ… Automatic HTTPS
- âœ… Free tier sufficient for testing
- âœ… Easy to scale later

---

## Need Help?

If you encounter issues:
1. Check deployment logs
2. Verify environment variables
3. Test database connection
4. Check file permissions (storage/ and bootstrap/cache/)

Good luck with your deployment! ðŸš€
